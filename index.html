<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">

    <title>HoloR API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;command or code&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="command or code">command or code</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://gitlab.com/holor/holor'>GitLab</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p><img alt="HoloR Image" src="images/holor_homeappliances.jpg" /></p>

<p><strong>What is HoloR?</strong></p>

<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

<h1 id="preparation">Preparation</h1>

<p>In order to develop stuff for HoloR you <strong>need</strong> the following</p>

<ul>
<li><strong><a href="https://node.jsorg">Node.js LTS 6</a></strong> (&gt;= 6.9.0)</li>
<li><strong><a href="https://www.google.de/chrome/browser/desktop/">Google Chrome</a></strong> or other recent ES6 browser</li>
<li><strong><a href="https://git-scm.com/downloads">git</a></strong></li>
</ul>

<p>I further recommend installing and using</p>

<ul>
<li><strong><a href="https://code.visualstudio.com/">Visual Studio Code</a></strong> &amp; <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">ESLint</a></li>
<li><strong><a href="https://www.sourcetreeapp.com/">SourceTree</a></strong></li>
</ul>

<p>These should be available for Mac OS X, Linux and Windows.</p>

<h2 id="access-gitlab-repository">Access GitLab repository</h2>

<p>Register at <a href="http://gitlab.com/">http://gitlab.com</a> and send your username to <a href="mailto:cschwede@techfak.uni-bielefeld.de"/>cschwede@techfak.uni-bielefeld.de</a></p>

<h2 id="download-repository">Download Repository</h2>

<p>Once you have been given access to the repository, you can clone it locally.
This might take some time depending on the projects history and current size.</p>

<blockquote>
<p>Clone using git CLI, make sure you have added your SSH public key to GitLab</p>
</blockquote>
<pre class="highlight plaintext"><code>git clone git@gitlab.com:holoR/HoloR.git
</code></pre>

<blockquote>
<p>Clone using Git GUI, e.g. SourceTree</p>
</blockquote>

<h2 id="project-structure">Project structure</h2>

<p>The project is structured as seen to the right.
Most of the time you will be working in the directories marked with ✅.</p>
<pre class="highlight plaintext"><code>$&gt; cd HoloR

$&gt; ls

├── lib
│   ├── core
│   ├── plugins ✅
│   └── services ✅
├── node_modules
├── resources
├── rooms
│   ├── AmiLab
│   └── HoloRBox
├── src
│   └── scenes ✅
│   ├── styles
│   ├── app.js
│   └── requirements.js
│   └── scenes.js
├── tools
├── typings
├── vendor
├── index.html
├── jsconfig.json
├── package.json
├── start.js
├── typings.json
└── webpack.config.js
</code></pre>

<h2 id="install-holor-dependencies">Install HoloR dependencies</h2>
<pre class="highlight plaintext"><code>npm install
node start services -i
</code></pre>

<p>This might take a while.</p>

<h2 id="start-holor">Start HoloR</h2>
<pre class="highlight plaintext"><code>node start help
node start frontend -s Dummy
node start services
</code></pre>

<p>Open HoloR with your favourite browser at <a href="http://localhost:8080">http://localhost:8080</a>.</p>

<aside class="warning">You can change quality settings via url (e.g. <code>http://localhost:8080/?quality=low</code>), valid quality settings are *mobile, low, medium, high, ultra*</aside>

<aside class="notice">You can supply options, see <code>node start --help</code>, e.g. &rsquo;-f&rsquo; for simulating a viewer or &rsquo;-l&rsquo; for showing the error overlay</aside>

<h2 id="navigating-in-holor">Navigating in HoloR</h2>

<ul>
<li>use mouse to move around (left: rotate, right: translate, scroll: zoom)</li>
<li>&ldquo;p&rdquo; is for projection mode</li>
<li>&ldquo;d&rdquo; is for debug mode</li>
<li>&ldquo;g&rdquo; toggles GUI</li>
<li>&ldquo;h&rdquo; toggles helpers</li>
</ul>

          <h1 id="frontend">Frontend</h1>

<aside class="warning">Please see the tutorial scene at <code>scenes/tutorial</code></aside>

<h2 id="rooms">Rooms</h2>

<p>HoloR will load the room specified in <code class="prettyprint">src/app.js</code> (defaults to AmiLab).</p>
<pre class="highlight plaintext"><code>window.HoloR.loadRoom("AmiLab");
</code></pre>

<p>The room definition includes</p>

<ul>
<li><strong>size and room geometry</strong> including walls, doors, furniture</li>
<li><strong>projector configuration</strong> (extrinsic and intrinsic parameters)</li>
</ul>

<p>HoloR uses <a href="https://github.com/mrdoob/three.js/">three.js</a> and WebGL to render objects.
The coordinate system</p>

<ul>
<li>is <strong>right-handed, y-up</strong></li>
<li>has one of the <strong>lower room-corners</strong> as its <strong>origin</strong></li>
<li>uses units in <strong>meter</strong></li>
</ul>

<h2 id="loading-scenes">Loading scenes</h2>

<p>The room only consists of walls, floor and loaded furniture.
To actually render something we need to load a scene.</p>

<h2 id="creating-new-scenes">Creating new scenes</h2>

<p>Follow the steps to create a new scene named &ldquo;MyTestScene&rdquo;.</p>

<blockquote>
<p>Create a copy of the dummy template</p>
</blockquote>
<pre class="highlight plaintext"><code>cp -R HoloR/lib/scenes/Dummy HoloR/lib/scenes/MyTestScene
</code></pre>

<blockquote>
<p>Update the scene name at the end of <code class="prettyprint">MyTestScene/index.js</code></p>
</blockquote>
<pre class="highlight plaintext"><code>HoloRAbstractScene.add("MyTestScene",HoloRScene);
</code></pre>

<blockquote>
<p>Finally make sure you load the scene:</p>
</blockquote>
<pre class="highlight plaintext"><code>node start frontend -s MyTestScene
</code></pre>

<aside class="notice">The terminal where you started <code>node start frontend</code> will show you errors if applicable (as will your browsers development console).</aside>

<h2 id="adding-objects">Adding Objects</h2>
<pre class="highlight javascript"><code>    <span class="nx">constructor</span><span class="p">()</span> <span class="p">{</span>

        <span class="c1">//attach image to 3d object</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">mesh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Mesh</span><span class="p">(</span>
            <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">BoxGeometry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
            <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">MeshBasicMaterial</span><span class="p">({</span>
                <span class="na">color</span><span class="p">:</span><span class="mh">0xff0000</span>
            <span class="p">})</span>
        <span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">mesh</span> <span class="o">=</span> <span class="nx">mesh</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mesh</span><span class="p">);</span>

        <span class="c1">//to remove it:</span>
        <span class="c1">//this.remove(mesh);</span>
    <span class="p">},</span>

    <span class="nx">onRender</span><span class="p">(</span><span class="nx">now</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">speed</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">mesh</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">now</span><span class="o">*</span><span class="nx">speed</span><span class="p">)</span><span class="o">*</span><span class="nx">r</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">mesh</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">now</span><span class="o">*</span><span class="nx">speed</span><span class="p">)</span><span class="o">*</span><span class="nx">r</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre>

<h2 id="lights-and-shadow">Lights and Shadow</h2>

<p>Please see the samples.</p>
<pre class="highlight javascript"><code>    <span class="kd">var</span> <span class="nx">light</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PointLight</span><span class="p">(</span> <span class="mh">0x00ff55</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">50</span> <span class="p">);</span>
    <span class="nx">light</span><span class="p">.</span><span class="nx">castShadow</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">light</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">light</span><span class="p">);</span>
</code></pre>

<aside class="notice">Make sure the objects in your scene have a material that responds to light, e.g. <code>MeshPhongMaterial</code> or <code>MeshLambertMaterial</code></aside>

<h2 id="textures">Textures</h2>
<pre class="highlight javascript"><code>    <span class="c1">//load image</span>
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">'http://i.imgur.com/Gs04Gue.png'</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">texture</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">TextureLoader</span><span class="p">(</span><span class="nx">url</span><span class="p">,()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Texture has been loaded"</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="c1">//attach image to 3d object</span>
    <span class="kd">var</span> <span class="nx">mesh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Mesh</span><span class="p">(</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">BoxGeometry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">MeshBasicMaterial</span><span class="p">({</span>
            <span class="na">map</span><span class="p">:</span> <span class="nx">texture</span>
        <span class="p">})</span>
    <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">mesh</span><span class="p">);</span>
</code></pre>

<p>Support for</p>

<ul>
<li>images</li>
<li>camera</li>
<li>2D canvas</li>
<li><p>charts</p></li>
<li><p>see <code class="prettyprint">src/scenes/TextureExample/index.js</code></p></li>
</ul>

<h2 id="keyboard-mouse">Keyboard/Mouse</h2>
<pre class="highlight javascript"><code>    <span class="kd">var</span> <span class="nx">evtName</span> <span class="o">=</span> <span class="s2">"keypress"</span><span class="p">;</span> <span class="c1">//keydown,keyup,keypress,click,dblclick</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">evtName</span><span class="p">,</span><span class="nx">evt</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">evtName</span><span class="p">,</span><span class="s2">"fired"</span><span class="p">,</span><span class="nx">evt</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre>

<h2 id="tracking-data">Tracking Data</h2>
<pre class="highlight javascript"><code><span class="nx">onUpdate</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">viewer</span> <span class="o">=</span> <span class="nx">HoloR</span><span class="p">.</span><span class="nx">getNearestViewer</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">viewer</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="c1">//get viewer position and orientation</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">viewer</span><span class="p">.</span><span class="nx">position</span><span class="p">,</span> <span class="nx">viewer</span><span class="p">.</span><span class="nx">quaternion</span><span class="p">);</span>

    <span class="c1">//access skeleton data</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">viewer</span><span class="p">.</span><span class="nx">skeleton</span><span class="p">.</span><span class="nx">joints</span><span class="p">.</span><span class="nx">Head</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<h2 id="camera-microphone-input">Camera/Microphone Input</h2>

<h2 id="spatial-audio">Spatial Audio</h2>

          <h1 id="backend">Backend</h1>

          <h1 id="frequently-asked-questions">Frequently Asked Questions</h1>

<h2 id="multiple-scenes">Multiple scenes</h2>

<blockquote>
<p>In <code class="prettyprint">src/scenes.js</code>, add the scenes you would like to load like this:</p>
</blockquote>
<pre class="highlight plaintext"><code>require("scenes/MyTestScene");
require("scenes/AnotherTestScene");

</code></pre>

<blockquote>
<p>and start the frontend without the &rsquo;-s&rsquo; parameters</p>
</blockquote>
<pre class="highlight plaintext"><code>node start frontend
</code></pre>

<aside class="notice">You can load as many scenes as you want and toggle the scenes using the numblock numeric digit keys (e.g. press 2 to toggle second scene).</aside>

<h2 id="animated-gifs">Animated GIFs</h2>

<p>Sorry, not yet</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="command or code">command or code</a>
          </div>
      </div>
    </div>
  </body>
</html>
